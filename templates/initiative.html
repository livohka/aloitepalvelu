{% extends "base.html" %}

{% block title %}Aloitteen sivu — Aloitepalvelu{% endblock %}

{% block main %}
  <h1>{{ initiative.title }}</h1>

  <div class="initiative-card">
    <div class="initiative-content">
      <p>{{ initiative.description }}</p>

      {% if initiative.image %}
        <img src="{{ url_for('initiative_image', id=initiative.id) }}" 
             alt="Aloitteen kuva" 
             class="initiative-image">
      {% else %}
        <img src="{{ url_for('static', filename='kukka_optimized_50.png') }}" 
             alt="Oletuskuva" 
             class="initiative-image">
      {% endif %}
    </div>
  </div>

  <p>Tekijä: {{ initiative.username }}</p>
  <p>Allekirjoituksia: {{ signatures }}</p>

  {% if initiative.active == 0 %}
    <p style="color: gray;">Tämä aloite on deaktivoitu, allekirjoittaminen ei ole mahdollista.</p>
  {% else %}
    {% if session.get('user_id') %}
      <form method="post">
        {% if user_signature %}
          <button type="submit" name="unsign">Poista allekirjoitus</button>
        {% else %}
          <button type="submit" name="sign">Allekirjoita</button>
        {% endif %}
      </form>
    {% else %}
      <p><a href="{{ url_for('index') }}">Kirjaudu sisään</a> allekirjoittaaksesi</p>
    {% endif %}
  {% endif %}
{% endblock %}
