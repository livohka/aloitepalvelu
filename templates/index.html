{% extends "base.html" %}

{% block title %}Etusivu — Aloitepalvelu{% endblock %}

{% block header %}
  <a href="{{ url_for('index') }}">Etusivu</a>
  {% if session.get('username') %}
    <a href="{{ url_for('user') }}">Omat tiedot</a>
    <a href="{{ url_for('logout') }}">Kirjaudu ulos</a>
  {% endif %}
{% endblock %}

{% block main %}
  <h2>Tervetuloa Aloitepalveluun</h2>
  <p>Täällä voit tehdä aloitteita ja kerätä muiden käyttäjien allekirjoituksia.</p>

  {% if not session.get('username') %}
    <h3>Kirjautuminen</h3>
    <form action="{{ url_for('login') }}" method="post">
      <label>
        Käyttäjätunnus
        <input type="text" name="username" required maxlength="50">
      </label>
      <label>
        Salasana
        <input type="password" name="password" required maxlength="100">
      </label>
      <button type="submit">Kirjaudu</button>
    </form>
    <p>Ei vielä tunnusta? <a href="{{ url_for('register') }}">Rekisteröidy tästä</a></p>
  {% else %}
    <p>Olet kirjautunut sisään käyttäjänä <strong>{{ session.username }}</strong>.</p>
    <p><a href="{{ url_for('new') }}">Luo uusi aloite</a></p>
  {% endif %}

  <h3>Aloitteet</h3>
  <p>Aloitteiden määrä: {{ count }}</p>
  <ul>
    {% for initiative in initiatives %}
      <li>
        <a href="{{ url_for('initiative_page', id=initiative.id) }}">
          {{ initiative.title }}
        </a>
        – tekijä: {{ initiative.username }}
      </li>
    {% endfor %}
  </ul>
{% endblock %}
